(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerpolicy&&(r.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?r.credentials="include":l.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(l){if(l.ep)return;l.ep=!0;const r=n(l);fetch(l.href,r)}})();function j(){}function ue(e){return e()}function ne(){return Object.create(null)}function T(e){e.forEach(ue)}function fe(e){return typeof e=="function"}function de(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function be(e){return Object.keys(e).length===0}function a(e,t){e.appendChild(t)}function P(e,t,n){e.insertBefore(t,n||null)}function q(e){e.parentNode&&e.parentNode.removeChild(e)}function ve(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function h(e){return document.createElement(e)}function y(e){return document.createTextNode(e)}function x(){return y(" ")}function re(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function c(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function we(e){return Array.from(e.childNodes)}function C(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function le(e,t){e.value=t??""}function $e(e,t,{bubbles:n=!1,cancelable:i=!1}={}){const l=document.createEvent("CustomEvent");return l.initCustomEvent(e,n,i,t),l}let I;function A(e){I=e}function xe(){if(!I)throw new Error("Function called outside component initialization");return I}function ke(){const e=xe();return(t,n,{cancelable:i=!1}={})=>{const l=e.$$.callbacks[t];if(l){const r=$e(t,n,{cancelable:i});return l.slice().forEach(o=>{o.call(e,r)}),!r.defaultPrevented}return!0}}const O=[],ie=[],J=[],oe=[],qe=Promise.resolve();let U=!1;function Ee(){U||(U=!0,qe.then(_e))}function X(e){J.push(e)}const Y=new Set;let N=0;function _e(){if(N!==0)return;const e=I;do{try{for(;N<O.length;){const t=O[N];N++,A(t),Se(t.$$)}}catch(t){throw O.length=0,N=0,t}for(A(null),O.length=0,N=0;ie.length;)ie.pop()();for(let t=0;t<J.length;t+=1){const n=J[t];Y.has(n)||(Y.add(n),n())}J.length=0}while(O.length);for(;oe.length;)oe.pop()();U=!1,Y.clear(),A(e)}function Se(e){if(e.fragment!==null){e.update(),T(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(X)}}const K=new Set;let ze;function he(e,t){e&&e.i&&(K.delete(e),e.i(t))}function Le(e,t,n,i){if(e&&e.o){if(K.has(e))return;K.add(e),ze.c.push(()=>{K.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}function Ne(e){e&&e.c()}function pe(e,t,n,i){const{fragment:l,after_update:r}=e.$$;l&&l.m(t,n),i||X(()=>{const o=e.$$.on_mount.map(ue).filter(fe);e.$$.on_destroy?e.$$.on_destroy.push(...o):T(o),e.$$.on_mount=[]}),r.forEach(X)}function me(e,t){const n=e.$$;n.fragment!==null&&(T(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Oe(e,t){e.$$.dirty[0]===-1&&(O.push(e),Ee(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ge(e,t,n,i,l,r,o,u=[-1]){const d=I;A(e);const s=e.$$={fragment:null,ctx:[],props:r,update:j,not_equal:l,bound:ne(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(d?d.$$.context:[])),callbacks:ne(),dirty:u,skip_bound:!1,root:t.target||d.$$.root};o&&o(s.root);let E=!1;if(s.ctx=n?n(e,t.props||{},(m,S,...v)=>{const b=v.length?v[0]:S;return s.ctx&&l(s.ctx[m],s.ctx[m]=b)&&(!s.skip_bound&&s.bound[m]&&s.bound[m](b),E&&Oe(e,m)),S}):[],s.update(),E=!0,T(s.before_update),s.fragment=i?i(s.ctx):!1,t.target){if(t.hydrate){const m=we(t.target);s.fragment&&s.fragment.l(m),m.forEach(q)}else s.fragment&&s.fragment.c();t.intro&&he(e.$$.fragment),pe(e,t.target,t.anchor,t.customElement),_e()}A(d)}class ye{$destroy(){me(this,1),this.$destroy=j}$on(t,n){if(!fe(n))return j;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const l=i.indexOf(n);l!==-1&&i.splice(l,1)}}$set(t){this.$$set&&!be(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Ce(e){let t,n,i,l,r,o,u;return{c(){t=h("div"),n=h("input"),i=x(),l=h("button"),r=y(e[1]),c(n,"class","bg-slate-700 w-3/4 text-white m-1"),c(n,"placeholder",e[0]),c(l,"class","bg-green-300 rounded-sm text-black m-1 h-12 w-12"),c(t,"id","barContainer"),c(t,"class","mb-10 flex justify-between")},m(d,s){P(d,t,s),a(t,n),le(n,e[2]),a(t,i),a(t,l),a(l,r),o||(u=[re(n,"input",e[4]),re(l,"click",e[3])],o=!0)},p(d,[s]){s&1&&c(n,"placeholder",d[0]),s&4&&n.value!==d[2]&&le(n,d[2]),s&2&&C(r,d[1])},i:j,o:j,d(d){d&&q(t),o=!1,T(u)}}}function Pe(e,t,n){let{input_placeholder_text:i}=t,{submit_button_text:l}=t,r="";const o=ke();function u(){o("inputSubmitted",{data:r})}function d(){r=this.value,n(2,r)}return e.$$set=s=>{"input_placeholder_text"in s&&n(0,i=s.input_placeholder_text),"submit_button_text"in s&&n(1,l=s.submit_button_text)},[i,l,r,u,d]}class Ae extends ye{constructor(t){super(),ge(this,t,Pe,Ce,de,{input_placeholder_text:0,submit_button_text:1})}}function se(e,t,n){const i=e.slice();return i[6]=t[n],i}function ce(e){let t,n,i,l=e[0].address+"",r,o,u,d,s=e[0].ticket_price/F+"",E,m,S,v,b,Z,k,w,G,R=e[0].last_winner.address+"",M,W,H,z,Q,B=e[0].last_winner.reward/F+"",V;function ee(f,g){return f[0].registration_open?Ie:je}let D=ee(e),$=D(e),L=e[0].registrants,p=[];for(let f=0;f<L.length;f+=1)p[f]=ae(se(e,L,f));return{c(){t=h("div"),n=h("div"),i=h("p"),r=y(l),o=x(),u=h("p"),d=y("Entry cost: "),E=y(s),m=x(),$.c(),S=x(),v=h("div"),b=h("div");for(let f=0;f<p.length;f+=1)p[f].c();Z=x(),k=h("div"),w=h("a"),G=y("Last winner: "),M=y(R),H=x(),z=h("p"),Q=y("Last won prize: "),V=y(B),c(i,"class","font-mono m-2 text-slate-100 scaletext svelte-1qcqkmz"),c(u,"class","font-mono text-slate-100 scaletext svelte-1qcqkmz"),c(b,"class","bg-slate-600 font-mono w-full h-full text-slate-100 rounded-lg text-center svelte-1qcqkmz"),c(b,"id","registrants"),c(v,"id","registrants_container"),c(v,"class","flex flex-col items-center svelte-1qcqkmz"),c(w,"id","last_winner_address"),c(w,"class","font-mono text-xs text-slate-100 underline svelte-1qcqkmz"),c(w,"href",W="https://kryolite-crypto.github.io/explorer/wallet/?wallet="+e[0].last_winner.address),c(z,"id","last_winner_reward"),c(z,"class","font-mono text-xs text-slate-100 svelte-1qcqkmz"),c(k,"id","last_winner"),c(k,"class","flex flex-col items-center m-5"),c(n,"id","lotteryDisplay"),c(n,"class","flex flex-col items-center bg-zinc-900 rounded-lg w-11/12"),c(t,"class","flex flex-col items-center")},m(f,g){P(f,t,g),a(t,n),a(n,i),a(i,r),a(n,o),a(n,u),a(u,d),a(u,E),a(n,m),$.m(n,null),a(n,S),a(n,v),a(v,b);for(let _=0;_<p.length;_+=1)p[_].m(b,null);a(n,Z),a(n,k),a(k,w),a(w,G),a(w,M),a(k,H),a(k,z),a(z,Q),a(z,V)},p(f,g){if(g&1&&l!==(l=f[0].address+"")&&C(r,l),g&1&&s!==(s=f[0].ticket_price/F+"")&&C(E,s),D!==(D=ee(f))&&($.d(1),$=D(f),$&&($.c(),$.m(n,S))),g&1){L=f[0].registrants;let _;for(_=0;_<L.length;_+=1){const te=se(f,L,_);p[_]?p[_].p(te,g):(p[_]=ae(te),p[_].c(),p[_].m(b,null))}for(;_<p.length;_+=1)p[_].d(1);p.length=L.length}g&1&&R!==(R=f[0].last_winner.address+"")&&C(M,R),g&1&&W!==(W="https://kryolite-crypto.github.io/explorer/wallet/?wallet="+f[0].last_winner.address)&&c(w,"href",W),g&1&&B!==(B=f[0].last_winner.reward/F+"")&&C(V,B)},d(f){f&&q(t),$.d(),ve(p,f)}}}function je(e){let t;return{c(){t=h("p"),t.textContent="Registerations are closed!",c(t,"class","font-mono text-slate-100 scaletext svelte-1qcqkmz")},m(n,i){P(n,t,i)},d(n){n&&q(t)}}}function Ie(e){let t;return{c(){t=h("p"),t.textContent="Registerations are open!",c(t,"class","font-mono text-slate-100 scaletext svelte-1qcqkmz")},m(n,i){P(n,t,i)},d(n){n&&q(t)}}}function ae(e){let t,n=e[6]+"",i,l,r;return{c(){t=h("a"),i=y(n),l=x(),c(t,"class","underline"),c(t,"href",r="https://kryolite-crypto.github.io/explorer/wallet/?wallet="+e[6])},m(o,u){P(o,t,u),a(t,i),a(t,l)},p(o,u){u&1&&n!==(n=o[6]+"")&&C(i,n),u&1&&r!==(r="https://kryolite-crypto.github.io/explorer/wallet/?wallet="+o[6])&&c(t,"href",r)},d(o){o&&q(t)}}}function Te(e){let t,n,i,l;n=new Ae({props:{input_placeholder_text:"Enter lottery address",submit_button_text:"Load"}}),n.$on("inputSubmitted",e[1]);let r=e[0]&&ce(e);return{c(){t=h("body"),Ne(n.$$.fragment),i=x(),r&&r.c()},m(o,u){P(o,t,u),pe(n,t,null),a(t,i),r&&r.m(t,null),l=!0},p(o,[u]){o[0]?r?r.p(o,u):(r=ce(o),r.c(),r.m(t,null)):r&&(r.d(1),r=null)},i(o){l||(he(n.$$.fragment,o),l=!0)},o(o){Le(n.$$.fragment,o),l=!1},d(o){o&&q(t),me(n),r&&r.d()}}}const Re="https://testnet-1.kryolite.io",F=1e6;async function We(e,t,n){return new Promise((i,l)=>{fetch(`${e}${t}`,{body:JSON.stringify(n),headers:{"Content-Type":"application/json"},method:"POST"}).then(r=>r.json().catch(o=>{console.error(o)})).then(r=>{i(r)}).catch(r=>{l(r)})})}function Be(e,t,n){const i=new URLSearchParams(window.location.search);let l;i.get("showWin"),i.get("showReg"),i.get("address")!=null?r({detail:{data:i.get("address")}}):r({detail:{data:"kryo:5VWWgFqhghrZvPmmXa48ajnd7vTawvYgbT4f"}});async function r(o){let u=o.detail.data;u&&u.startsWith("kryo:")&&We(Re,`/contract/${u}/call`,{method:"get_state"}).then(d=>{JSON.stringify(d),d.address=u,n(0,l=d),console.log(l)}).catch(d=>{console.error(d)})}return[l,r]}class De extends ye{constructor(t){super(),ge(this,t,Be,Te,de,{})}}new De({target:document.getElementById("app")});
