(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function q(){}function ve(t){return t()}function ue(){return Object.create(null)}function I(t){t.forEach(ve)}function ye(t){return typeof t=="function"}function Q(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ke(t){return Object.keys(t).length===0}function f(t,e){t.appendChild(e)}function S(t,e,n){t.insertBefore(e,n||null)}function $(t){t.parentNode&&t.parentNode.removeChild(t)}function we(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function _(t){return document.createElement(t)}function g(t){return document.createTextNode(t)}function b(){return g(" ")}function X(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function u(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ee(t){return Array.from(t.childNodes)}function L(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function fe(t,e){t.value=e??""}function qe(t,e,{bubbles:n=!1,cancelable:l=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,l,e),r}let B;function A(t){B=t}function Se(){if(!B)throw new Error("Function called outside component initialization");return B}function ze(){const t=Se();return(e,n,{cancelable:l=!1}={})=>{const r=t.$$.callbacks[e];if(r){const i=qe(e,n,{cancelable:l});return r.slice().forEach(s=>{s.call(t,i)}),!i.defaultPrevented}return!0}}const j=[],de=[],J=[],_e=[],Le=Promise.resolve();let Z=!1;function Ne(){Z||(Z=!0,Le.then($e))}function G(t){J.push(t)}const U=new Set;let P=0;function $e(){if(P!==0)return;const t=B;do{try{for(;P<j.length;){const e=j[P];P++,A(e),Ce(e.$$)}}catch(e){throw j.length=0,P=0,e}for(A(null),j.length=0,P=0;de.length;)de.pop()();for(let e=0;e<J.length;e+=1){const n=J[e];U.has(n)||(U.add(n),n())}J.length=0}while(j.length);for(;_e.length;)_e.pop()();Z=!1,U.clear(),A(t)}function Ce(t){if(t.fragment!==null){t.update(),I(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(G)}}const K=new Set;let Oe;function M(t,e){t&&t.i&&(K.delete(t),t.i(e))}function H(t,e,n,l){if(t&&t.o){if(K.has(t))return;K.add(t),Oe.c.push(()=>{K.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function xe(t){t&&t.c()}function ee(t,e,n,l){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),l||G(()=>{const s=t.$$.on_mount.map(ve).filter(ye);t.$$.on_destroy?t.$$.on_destroy.push(...s):I(s),t.$$.on_mount=[]}),i.forEach(G)}function te(t,e){const n=t.$$;n.fragment!==null&&(I(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Pe(t,e){t.$$.dirty[0]===-1&&(j.push(t),Ne(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ne(t,e,n,l,r,i,s,c=[-1]){const a=B;A(t);const o=t.$$={fragment:null,ctx:[],props:i,update:q,not_equal:r,bound:ue(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:ue(),dirty:c,skip_bound:!1,root:e.target||a.$$.root};s&&s(o.root);let y=!1;if(o.ctx=n?n(t,e.props||{},(m,N,...x)=>{const w=x.length?x[0]:N;return o.ctx&&r(o.ctx[m],o.ctx[m]=w)&&(!o.skip_bound&&o.bound[m]&&o.bound[m](w),y&&Pe(t,m)),N}):[],o.update(),y=!0,I(o.before_update),o.fragment=l?l(o.ctx):!1,e.target){if(e.hydrate){const m=Ee(e.target);o.fragment&&o.fragment.l(m),m.forEach($)}else o.fragment&&o.fragment.c();e.intro&&M(t.$$.fragment),ee(t,e.target,e.anchor,e.customElement),$e()}A(a)}class le{$destroy(){te(this,1),this.$destroy=q}$on(e,n){if(!ye(n))return q;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(e){this.$$set&&!ke(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function he(t,e,n){const l=t.slice();return l[2]=e[n],l}function pe(t){let e,n=t[2].text+"",l,r,i,s;function c(){return t[1](t[2])}return{c(){e=_("button"),l=g(n),r=b(),u(e,"class","hover:bg-blue-200 text-gray-800 bg-slate-200 rounded mr-3 scalebutton svelte-17cx9d3")},m(a,o){S(a,e,o),f(e,l),f(e,r),i||(s=X(e,"click",c),i=!0)},p(a,o){t=a,o&1&&n!==(n=t[2].text+"")&&L(l,n)},d(a){a&&$(e),i=!1,s()}}}function je(t){let e,n,l,r,i=t[0],s=[];for(let c=0;c<i.length;c+=1)s[c]=pe(he(t,i,c));return{c(){e=_("div"),n=_("pre"),n.textContent=`█▄▀ █▀▄ ▀▄▀ ▄▀▄ █   █ ▀█▀ ██▀\r
█ █ █▀▄  █  ▀▄▀ █▄▄ █  █  █▄▄\r
  `,l=b(),r=_("div");for(let c=0;c<s.length;c+=1)s[c].c();u(n,"class","text-white"),u(r,"id","buttoncontainer"),u(r,"class","flex flex-row svelte-17cx9d3"),u(e,"id","navbar"),u(e,"class","mb-10 mt-1 flex justify-between svelte-17cx9d3")},m(c,a){S(c,e,a),f(e,n),f(e,l),f(e,r);for(let o=0;o<s.length;o+=1)s[o].m(r,null)},p(c,[a]){if(a&1){i=c[0];let o;for(o=0;o<i.length;o+=1){const y=he(c,i,o);s[o]?s[o].p(y,a):(s[o]=pe(y),s[o].c(),s[o].m(r,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=i.length}},i:q,o:q,d(c){c&&$(e),we(s,c)}}}function Ae(t,e,n){let{buttons:l=[]}=e;const r=i=>{window.location.href=i.link};return t.$$set=i=>{"buttons"in i&&n(0,l=i.buttons)},[l,r]}class Be extends le{constructor(e){super(),ne(this,e,Ae,je,Q,{buttons:0})}}function Ie(t){let e,n,l,r,i,s,c;return{c(){e=_("div"),n=_("input"),l=b(),r=_("button"),i=g(t[1]),u(n,"class","bg-slate-700 w-3/4 text-white m-1"),u(n,"placeholder",t[0]),u(r,"class","bg-green-300 rounded-sm text-black m-1 h-12 w-12"),u(e,"id","barContainer"),u(e,"class","mb-10 flex justify-between")},m(a,o){S(a,e,o),f(e,n),fe(n,t[2]),f(e,l),f(e,r),f(r,i),s||(c=[X(n,"input",t[4]),X(r,"click",t[3])],s=!0)},p(a,[o]){o&1&&u(n,"placeholder",a[0]),o&4&&n.value!==a[2]&&fe(n,a[2]),o&2&&L(i,a[1])},i:q,o:q,d(a){a&&$(e),s=!1,I(c)}}}function Te(t,e,n){let{input_placeholder_text:l}=e,{submit_button_text:r}=e,i="";const s=ze();function c(){s("inputSubmitted",{data:i})}function a(){i=this.value,n(2,i)}return t.$$set=o=>{"input_placeholder_text"in o&&n(0,l=o.input_placeholder_text),"submit_button_text"in o&&n(1,r=o.submit_button_text)},[l,r,i,c,a]}class Re extends le{constructor(e){super(),ne(this,e,Te,Ie,Q,{input_placeholder_text:0,submit_button_text:1})}}function me(t,e,n){const l=t.slice();return l[7]=e[n],l}function We(t){let e,n;return e=new Re({props:{input_placeholder_text:"Enter lottery address",submit_button_text:"Load"}}),e.$on("inputSubmitted",t[2]),{c(){xe(e.$$.fragment)},m(l,r){ee(e,l,r),n=!0},p:q,i(l){n||(M(e.$$.fragment,l),n=!0)},o(l){H(e.$$.fragment,l),n=!1},d(l){te(e,l)}}}function ge(t){let e,n,l,r=t[0].address+"",i,s,c,a,o=t[0].ticket_price/F+"",y,m,N,x,w,re,z,k,ie,T=t[0].last_winner.address+"",V,R,oe,C,se,W=t[0].last_winner.reward/F+"",Y;function ce(d,v){return d[0].registration_open?Fe:De}let D=ce(t),E=D(t),O=t[0].registrants,p=[];for(let d=0;d<O.length;d+=1)p[d]=be(me(t,O,d));return{c(){e=_("div"),n=_("div"),l=_("p"),i=g(r),s=b(),c=_("p"),a=g("Entry cost: "),y=g(o),m=b(),E.c(),N=b(),x=_("div"),w=_("div");for(let d=0;d<p.length;d+=1)p[d].c();re=b(),z=_("div"),k=_("a"),ie=g("Last winner: "),V=g(T),oe=b(),C=_("p"),se=g("Last won prize: "),Y=g(W),u(l,"class","font-mono m-2 text-slate-100 scaletext svelte-1qcqkmz"),u(c,"class","font-mono text-slate-100 scaletext svelte-1qcqkmz"),u(w,"class","bg-slate-600 font-mono w-full h-full text-slate-100 rounded-lg text-center svelte-1qcqkmz"),u(w,"id","registrants"),u(x,"id","registrants_container"),u(x,"class","flex flex-col items-center svelte-1qcqkmz"),u(k,"id","last_winner_address"),u(k,"class","font-mono text-xs text-slate-100 underline svelte-1qcqkmz"),u(k,"href",R="https://kryolite-crypto.github.io/explorer/wallet/?wallet="+t[0].last_winner.address),u(C,"id","last_winner_reward"),u(C,"class","font-mono text-xs text-slate-100 svelte-1qcqkmz"),u(z,"id","last_winner"),u(z,"class","flex flex-col items-center m-5"),u(n,"id","lotteryDisplay"),u(n,"class","flex flex-col items-center bg-zinc-900 rounded-lg w-11/12"),u(e,"class","flex flex-col items-center")},m(d,v){S(d,e,v),f(e,n),f(n,l),f(l,i),f(n,s),f(n,c),f(c,a),f(c,y),f(n,m),E.m(n,null),f(n,N),f(n,x),f(x,w);for(let h=0;h<p.length;h+=1)p[h].m(w,null);f(n,re),f(n,z),f(z,k),f(k,ie),f(k,V),f(z,oe),f(z,C),f(C,se),f(C,Y)},p(d,v){if(v&1&&r!==(r=d[0].address+"")&&L(i,r),v&1&&o!==(o=d[0].ticket_price/F+"")&&L(y,o),D!==(D=ce(d))&&(E.d(1),E=D(d),E&&(E.c(),E.m(n,N))),v&1){O=d[0].registrants;let h;for(h=0;h<O.length;h+=1){const ae=me(d,O,h);p[h]?p[h].p(ae,v):(p[h]=be(ae),p[h].c(),p[h].m(w,null))}for(;h<p.length;h+=1)p[h].d(1);p.length=O.length}v&1&&T!==(T=d[0].last_winner.address+"")&&L(V,T),v&1&&R!==(R="https://kryolite-crypto.github.io/explorer/wallet/?wallet="+d[0].last_winner.address)&&u(k,"href",R),v&1&&W!==(W=d[0].last_winner.reward/F+"")&&L(Y,W)},d(d){d&&$(e),E.d(),we(p,d)}}}function De(t){let e;return{c(){e=_("p"),e.textContent="Registerations are closed!",u(e,"class","font-mono text-slate-100 scaletext svelte-1qcqkmz")},m(n,l){S(n,e,l)},d(n){n&&$(e)}}}function Fe(t){let e;return{c(){e=_("p"),e.textContent="Registerations are open!",u(e,"class","font-mono text-slate-100 scaletext svelte-1qcqkmz")},m(n,l){S(n,e,l)},d(n){n&&$(e)}}}function be(t){let e,n=t[7]+"",l,r,i;return{c(){e=_("a"),l=g(n),r=b(),u(e,"class","underline"),u(e,"href",i="https://kryolite-crypto.github.io/explorer/wallet/?wallet="+t[7])},m(s,c){S(s,e,c),f(e,l),f(e,r)},p(s,c){c&1&&n!==(n=s[7]+"")&&L(l,n),c&1&&i!==(i="https://kryolite-crypto.github.io/explorer/wallet/?wallet="+s[7])&&u(e,"href",i)},d(s){s&&$(e)}}}function Je(t){let e,n,l,r,i;n=new Be({props:{buttons:[{text:"Explorer",link:"https://kryolite-crypto.github.io/explorer/"},{text:"Back to menu",link:"https://kryolite.io/"}]}});let s=t[1]&&We(t),c=t[0]&&ge(t);return{c(){e=_("body"),xe(n.$$.fragment),l=b(),s&&s.c(),r=b(),c&&c.c()},m(a,o){S(a,e,o),ee(n,e,null),f(e,l),s&&s.m(e,null),f(e,r),c&&c.m(e,null),i=!0},p(a,[o]){a[1]&&s.p(a,o),a[0]?c?c.p(a,o):(c=ge(a),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i(a){i||(M(n.$$.fragment,a),M(s),i=!0)},o(a){H(n.$$.fragment,a),H(s),i=!1},d(a){a&&$(e),te(n),s&&s.d(),c&&c.d()}}}const Ke="https://testnet-1.kryolite.io",F=1e6;async function Me(t,e,n){return new Promise((l,r)=>{fetch(`${t}${e}`,{body:JSON.stringify(n),headers:{"Content-Type":"application/json"},method:"POST"}).then(i=>i.json().catch(s=>{console.error(s)})).then(i=>{l(i)}).catch(i=>{r(i)})})}function Ve(t,e,n){const l=new URLSearchParams(window.location.search);let r;l.get("showWin"),l.get("showReg");let i=l.get("showBar")==="true"||!1;l.get("address")!=null?s({detail:{data:l.get("address")}}):s({detail:{data:"kryo:5VWWgFqhghrZvPmmXa48ajnd7vTawvYgbT4f"}});async function s(c){let a=c.detail.data;a&&a.startsWith("kryo:")&&Me(Ke,`/contract/${a}/call`,{method:"get_state"}).then(o=>{JSON.stringify(o),o.address=a,n(0,r=o),console.log(r)}).catch(o=>{console.error(o)})}return[r,i,s]}class Ye extends le{constructor(e){super(),ne(this,e,Ve,Je,Q,{})}}new Ye({target:document.getElementById("app")});
